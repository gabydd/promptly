{"ast":null,"code":"import _slicedToArray from\"/home/gaby/Projects/promptly/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _taggedTemplateLiteral from\"/home/gaby/Projects/promptly/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";var _templateObject;import{Formik,Form}from\"formik\";import*as Yup from\"yup\";import FormFields from\"../components/FormFields\";import{useMutation,gql}from\"@apollo/client\";import{Redirect}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var CREATE_RESET_TOKEN=gql(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  mutation CreateResetToken($email: String!) {\\n    createResetToken(email: $email) {\\n      message\\n      success\\n    }\\n  }\\n\"])));var GetResetTokenView=function GetResetTokenView(){var _useMutation=useMutation(CREATE_RESET_TOKEN),_useMutation2=_slicedToArray(_useMutation,2),createResetToken=_useMutation2[0],_useMutation2$=_useMutation2[1],data=_useMutation2$.data,loading=_useMutation2$.loading;if(loading){return/*#__PURE__*/_jsx(\"div\",{children:\"Sending reset code...\"});}else if(data.success){return/*#__PURE__*/_jsx(Redirect,{to:\"/auth/forgot/reset\"});}else if(data.success===false){return/*#__PURE__*/_jsx(\"div\",{children:data.message});}return/*#__PURE__*/_jsx(\"div\",{className:\"bg-origin-padding w-min rounded-lg bg-gray-300 bg-opacity-90 shadow-2xl mt-10 ml-10 p-4\",children:/*#__PURE__*/_jsx(Formik,{initialValues:{email:\"\"},validationSchema:Yup.object({email:Yup.string().email(\"Invalid email address\").required(\"Required\")}),onSubmit:function onSubmit(values,_ref){var setSubmitting=_ref.setSubmitting;setTimeout(function(){createResetToken({variables:{email:values.email}});setSubmitting(false);},400);},className:\"flex items-center justify-center\",children:/*#__PURE__*/_jsxs(Form,{children:[/*#__PURE__*/_jsx(FormFields,{label:\"Email\",name:\"email\",type:\"text\"}),/*#__PURE__*/_jsx(\"div\",{className:\"h-4\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"bg-blue-600 rounded-full w-full text-white\",children:\"Forgot\"})]})})});};export default GetResetTokenView;","map":{"version":3,"sources":["/home/gaby/Projects/promptly/client/src/views/GetResetTokenView.js"],"names":["Formik","Form","Yup","FormFields","useMutation","gql","Redirect","CREATE_RESET_TOKEN","GetResetTokenView","createResetToken","data","loading","success","message","email","object","string","required","values","setSubmitting","setTimeout","variables"],"mappings":"wVAAA,OAASA,MAAT,CAAiBC,IAAjB,KAA6B,QAA7B,CACA,MAAO,GAAKC,CAAAA,GAAZ,KAAqB,KAArB,CACA,MAAOC,CAAAA,UAAP,KAAuB,0BAAvB,CACA,OAASC,WAAT,CAAsBC,GAAtB,KAAiC,gBAAjC,CACA,OAASC,QAAT,KAAyB,kBAAzB,C,wFAEA,GAAMC,CAAAA,kBAAkB,CAAGF,GAAH,oMAAxB,CASA,GAAMG,CAAAA,iBAAiB,CAAG,QAApBA,CAAAA,iBAAoB,EAAM,kBACgBJ,WAAW,CAACG,kBAAD,CAD3B,8CACvBE,gBADuB,kDACHC,IADG,gBACHA,IADG,CACGC,OADH,gBACGA,OADH,CAE9B,GAAIA,OAAJ,CAAa,CACX,mBAAO,8CAAP,CACD,CAFD,IAEO,IAAID,IAAI,CAACE,OAAT,CAAkB,CACvB,mBAAO,KAAC,QAAD,EAAU,EAAE,CAAC,oBAAb,EAAP,CACD,CAFM,IAEA,IAAIF,IAAI,CAACE,OAAL,GAAiB,KAArB,CAA4B,CACjC,mBAAO,qBAAMF,IAAI,CAACG,OAAX,EAAP,CACD,CACD,mBACE,YAAK,SAAS,CAAC,yFAAf,uBACE,KAAC,MAAD,EACE,aAAa,CAAE,CAAEC,KAAK,CAAE,EAAT,CADjB,CAEE,gBAAgB,CAAEZ,GAAG,CAACa,MAAJ,CAAW,CAC3BD,KAAK,CAAEZ,GAAG,CAACc,MAAJ,GACJF,KADI,CACE,uBADF,EAEJG,QAFI,CAEK,UAFL,CADoB,CAAX,CAFpB,CAOE,QAAQ,CAAE,kBAACC,MAAD,MAA+B,IAApBC,CAAAA,aAAoB,MAApBA,aAAoB,CACvCC,UAAU,CAAC,UAAM,CACfX,gBAAgB,CAAC,CACfY,SAAS,CAAE,CAAEP,KAAK,CAAEI,MAAM,CAACJ,KAAhB,CADI,CAAD,CAAhB,CAIAK,aAAa,CAAC,KAAD,CAAb,CACD,CANS,CAMP,GANO,CAAV,CAOD,CAfH,CAgBE,SAAS,CAAC,kCAhBZ,uBAkBE,MAAC,IAAD,yBACE,KAAC,UAAD,EAAY,KAAK,CAAC,OAAlB,CAA0B,IAAI,CAAC,OAA/B,CAAuC,IAAI,CAAC,MAA5C,EADF,cAEE,YAAK,SAAS,CAAC,KAAf,EAFF,cAGE,eACE,IAAI,CAAC,QADP,CAEE,SAAS,CAAC,4CAFZ,oBAHF,GAlBF,EADF,EADF,CAiCD,CA1CD,CA4CA,cAAeX,CAAAA,iBAAf","sourcesContent":["import { Formik, Form } from \"formik\";\nimport * as Yup from \"yup\";\nimport FormFields from \"../components/FormFields\";\nimport { useMutation, gql } from \"@apollo/client\";\nimport { Redirect } from \"react-router-dom\";\n\nconst CREATE_RESET_TOKEN = gql`\n  mutation CreateResetToken($email: String!) {\n    createResetToken(email: $email) {\n      message\n      success\n    }\n  }\n`;\n\nconst GetResetTokenView = () => {\n  const [createResetToken, { data, loading }] = useMutation(CREATE_RESET_TOKEN);\n  if (loading) {\n    return <div>Sending reset code...</div>;\n  } else if (data.success) {\n    return <Redirect to=\"/auth/forgot/reset\" />;\n  } else if (data.success === false) {\n    return <div>{data.message}</div>;\n  }\n  return (\n    <div className=\"bg-origin-padding w-min rounded-lg bg-gray-300 bg-opacity-90 shadow-2xl mt-10 ml-10 p-4\">\n      <Formik\n        initialValues={{ email: \"\" }}\n        validationSchema={Yup.object({\n          email: Yup.string()\n            .email(\"Invalid email address\")\n            .required(\"Required\"),\n        })}\n        onSubmit={(values, { setSubmitting }) => {\n          setTimeout(() => {\n            createResetToken({\n              variables: { email: values.email },\n            });\n\n            setSubmitting(false);\n          }, 400);\n        }}\n        className=\"flex items-center justify-center\"\n      >\n        <Form>\n          <FormFields label=\"Email\" name=\"email\" type=\"text\" />\n          <div className=\"h-4\" />\n          <button\n            type=\"submit\"\n            className=\"bg-blue-600 rounded-full w-full text-white\"\n          >\n            Forgot\n          </button>\n        </Form>\n      </Formik>\n    </div>\n  );\n};\n\nexport default GetResetTokenView;\n"]},"metadata":{},"sourceType":"module"}