{"ast":null,"code":"import _slicedToArray from\"/home/gaby/Projects/promptly/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _taggedTemplateLiteral from\"/home/gaby/Projects/promptly/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";var _templateObject;import{Formik,Form}from\"formik\";import*as Yup from\"yup\";import FormFields from\"../components/FormFields\";import{useMutation,gql}from\"@apollo/client\";import{Link}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var RESET_PASSWORD=gql(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  mutation ResetPassword($email: String!, $password: String!, $token: String!) {\\n    resetPassword(email: $email, password: $password, token: $token) {\\n      message\\n      success\\n    }\\n  }\\n\"])));var ResetPasswordView=function ResetPasswordView(){var _useMutation=useMutation(RESET_PASSWORD),_useMutation2=_slicedToArray(_useMutation,2),resetPassword=_useMutation2[0],_useMutation2$=_useMutation2[1],data=_useMutation2$.data,loading=_useMutation2$.loading;if(loading){return/*#__PURE__*/_jsx(\"div\",{children:\"Checking\"});}else if(data===undefined){}else if(data.resetPassword.success){return/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-center flex-col bg-origin-padding w-min rounded-lg bg-gray-300 bg-opacity-90 shadow-2xl mt-10 ml-10 p-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-center\",children:\"Reset Successful\"}),/*#__PURE__*/_jsx(Link,{to:\"/auth\",className:\"bg-blue-600 rounded-full w-full text-white mt-5 text-center\",children:\"Sign In\"})]});}return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-origin-padding w-min rounded-lg bg-gray-300 bg-opacity-90 shadow-2xl mt-10 ml-10 p-4\",children:[/*#__PURE__*/_jsx(Formik,{initialValues:{email:\"\",password:\"\",token:\"\"},validationSchema:Yup.object({email:Yup.string().email(\"Invalid email address\").required(\"Required\"),password:Yup.string().required(\"Required\"),token:Yup.string().matches(/^\\d+$/,\"Reset code is only numbers\").length(6,\"Reset code is six digits\").required(\"Required\")}),onSubmit:function onSubmit(values,_ref){var setSubmitting=_ref.setSubmitting;setTimeout(function(){resetPassword({variables:{email:values.email,password:values.password,token:values.token}});setSubmitting(false);},400);},className:\"flex items-center justify-center\",children:/*#__PURE__*/_jsxs(Form,{children:[/*#__PURE__*/_jsx(FormFields,{label:\"Email\",name:\"email\",type:\"text\"}),/*#__PURE__*/_jsx(FormFields,{label:\"Password\",name:\"password\",type:\"password\"}),/*#__PURE__*/_jsx(FormFields,{label:\"Reset Code\",name:\"token\",type:\"text\"}),/*#__PURE__*/_jsx(\"div\",{className:\"h-4\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"bg-blue-600 rounded-full w-full text-white\",children:\"Reset\"})]})}),data&&!data.resetPassword.success?/*#__PURE__*/_jsx(\"div\",{children:data.resetPassword.message}):undefined]});};export default ResetPasswordView;","map":{"version":3,"sources":["/home/gaby/Projects/promptly/client/src/views/ResetPasswordView.js"],"names":["Formik","Form","Yup","FormFields","useMutation","gql","Link","RESET_PASSWORD","ResetPasswordView","resetPassword","data","loading","undefined","success","email","password","token","object","string","required","matches","length","values","setSubmitting","setTimeout","variables","message"],"mappings":"wVAAA,OAASA,MAAT,CAAiBC,IAAjB,KAA6B,QAA7B,CACA,MAAO,GAAKC,CAAAA,GAAZ,KAAqB,KAArB,CACA,MAAOC,CAAAA,UAAP,KAAuB,0BAAvB,CACA,OAASC,WAAT,CAAsBC,GAAtB,KAAiC,gBAAjC,CACA,OAASC,IAAT,KAAqB,kBAArB,C,wFAEA,GAAMC,CAAAA,cAAc,CAAGF,GAAH,uQAApB,CASA,GAAMG,CAAAA,iBAAiB,CAAG,QAApBA,CAAAA,iBAAoB,EAAM,kBACaJ,WAAW,CAACG,cAAD,CADxB,8CACvBE,aADuB,kDACNC,IADM,gBACNA,IADM,CACAC,OADA,gBACAA,OADA,CAE9B,GAAIA,OAAJ,CAAa,CACX,mBAAO,iCAAP,CACD,CAFD,IAEO,IAAID,IAAI,GAAKE,SAAb,CAAwB,CAC9B,CADM,IACA,IAAIF,IAAI,CAACD,aAAL,CAAmBI,OAAvB,CAAgC,CACrC,mBACE,aAAK,SAAS,CAAC,mIAAf,wBACE,YAAK,SAAS,CAAC,aAAf,8BADF,cAEE,KAAC,IAAD,EAAM,EAAE,CAAC,OAAT,CAAiB,SAAS,CAAC,6DAA3B,qBAFF,GADF,CAMD,CACD,mBACE,aAAK,SAAS,CAAC,yFAAf,wBACE,KAAC,MAAD,EACE,aAAa,CAAE,CAAEC,KAAK,CAAE,EAAT,CAAaC,QAAQ,CAAE,EAAvB,CAA2BC,KAAK,CAAE,EAAlC,CADjB,CAEE,gBAAgB,CAAEd,GAAG,CAACe,MAAJ,CAAW,CAC3BH,KAAK,CAAEZ,GAAG,CAACgB,MAAJ,GACJJ,KADI,CACE,uBADF,EAEJK,QAFI,CAEK,UAFL,CADoB,CAI3BJ,QAAQ,CAAEb,GAAG,CAACgB,MAAJ,GAAaC,QAAb,CAAsB,UAAtB,CAJiB,CAK3BH,KAAK,CAAEd,GAAG,CAACgB,MAAJ,GACJE,OADI,CACI,OADJ,CACa,4BADb,EAEJC,MAFI,CAEG,CAFH,CAEM,0BAFN,EAGJF,QAHI,CAGK,UAHL,CALoB,CAAX,CAFpB,CAYE,QAAQ,CAAE,kBAACG,MAAD,MAA+B,IAApBC,CAAAA,aAAoB,MAApBA,aAAoB,CACvCC,UAAU,CAAC,UAAM,CACff,aAAa,CAAC,CACZgB,SAAS,CAAE,CACTX,KAAK,CAAEQ,MAAM,CAACR,KADL,CAETC,QAAQ,CAAEO,MAAM,CAACP,QAFR,CAGTC,KAAK,CAAEM,MAAM,CAACN,KAHL,CADC,CAAD,CAAb,CAQAO,aAAa,CAAC,KAAD,CAAb,CACD,CAVS,CAUP,GAVO,CAAV,CAWD,CAxBH,CAyBE,SAAS,CAAC,kCAzBZ,uBA2BE,MAAC,IAAD,yBACE,KAAC,UAAD,EAAY,KAAK,CAAC,OAAlB,CAA0B,IAAI,CAAC,OAA/B,CAAuC,IAAI,CAAC,MAA5C,EADF,cAEE,KAAC,UAAD,EAAY,KAAK,CAAC,UAAlB,CAA6B,IAAI,CAAC,UAAlC,CAA6C,IAAI,CAAC,UAAlD,EAFF,cAGE,KAAC,UAAD,EAAY,KAAK,CAAC,YAAlB,CAA+B,IAAI,CAAC,OAApC,CAA4C,IAAI,CAAC,MAAjD,EAHF,cAIE,YAAK,SAAS,CAAC,KAAf,EAJF,cAKE,eACE,IAAI,CAAC,QADP,CAEE,SAAS,CAAC,4CAFZ,mBALF,GA3BF,EADF,CAyCGb,IAAI,EAAI,CAACA,IAAI,CAACD,aAAL,CAAmBI,OAA5B,cACC,qBAAMH,IAAI,CAACD,aAAL,CAAmBiB,OAAzB,EADD,CAEGd,SA3CN,GADF,CA+CD,CA5DD,CA8DA,cAAeJ,CAAAA,iBAAf","sourcesContent":["import { Formik, Form } from \"formik\";\nimport * as Yup from \"yup\";\nimport FormFields from \"../components/FormFields\";\nimport { useMutation, gql } from \"@apollo/client\";\nimport { Link } from \"react-router-dom\";\n\nconst RESET_PASSWORD = gql`\n  mutation ResetPassword($email: String!, $password: String!, $token: String!) {\n    resetPassword(email: $email, password: $password, token: $token) {\n      message\n      success\n    }\n  }\n`;\n\nconst ResetPasswordView = () => {\n  const [resetPassword, { data, loading }] = useMutation(RESET_PASSWORD);\n  if (loading) {\n    return <div>Checking</div>;\n  } else if (data === undefined) {\n  } else if (data.resetPassword.success) {\n    return (\n      <div className=\"flex items-center justify-center flex-col bg-origin-padding w-min rounded-lg bg-gray-300 bg-opacity-90 shadow-2xl mt-10 ml-10 p-4\">\n        <div className=\"text-center\">Reset Successful</div>\n        <Link to=\"/auth\" className=\"bg-blue-600 rounded-full w-full text-white mt-5 text-center\">Sign In</Link>\n      </div>\n    );\n  }\n  return (\n    <div className=\"bg-origin-padding w-min rounded-lg bg-gray-300 bg-opacity-90 shadow-2xl mt-10 ml-10 p-4\">\n      <Formik\n        initialValues={{ email: \"\", password: \"\", token: \"\" }}\n        validationSchema={Yup.object({\n          email: Yup.string()\n            .email(\"Invalid email address\")\n            .required(\"Required\"),\n          password: Yup.string().required(\"Required\"),\n          token: Yup.string()\n            .matches(/^\\d+$/, \"Reset code is only numbers\")\n            .length(6, \"Reset code is six digits\")\n            .required(\"Required\"),\n        })}\n        onSubmit={(values, { setSubmitting }) => {\n          setTimeout(() => {\n            resetPassword({\n              variables: {\n                email: values.email,\n                password: values.password,\n                token: values.token,\n              },\n            });\n\n            setSubmitting(false);\n          }, 400);\n        }}\n        className=\"flex items-center justify-center\"\n      >\n        <Form>\n          <FormFields label=\"Email\" name=\"email\" type=\"text\" />\n          <FormFields label=\"Password\" name=\"password\" type=\"password\" />\n          <FormFields label=\"Reset Code\" name=\"token\" type=\"text\" />\n          <div className=\"h-4\" />\n          <button\n            type=\"submit\"\n            className=\"bg-blue-600 rounded-full w-full text-white\"\n          >\n            Reset\n          </button>\n        </Form>\n      </Formik>\n      {data && !data.resetPassword.success ? (\n        <div>{data.resetPassword.message}</div>\n      ) : undefined}\n    </div>\n  );\n};\n\nexport default ResetPasswordView;\n"]},"metadata":{},"sourceType":"module"}