{"ast":null,"code":"import _slicedToArray from\"/home/gaby/Projects/promptly/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _taggedTemplateLiteral from\"/home/gaby/Projects/promptly/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";var _templateObject;import{useMutation,gql}from\"@apollo/client\";import{Formik,Form,Field,ErrorMessage}from\"formik\";import*as Yup from\"yup\";import{useState}from\"react\";import{Redirect}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var LOGIN=gql(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  mutation Login($email: String!, $password: String!) {\\n    login(email: $email, password: $password) {\\n      message\\n    }\\n  }\\n\"])));var LoginView=function LoginView(_ref){var refetchUser=_ref.refetchUser;var _useMutation=useMutation(LOGIN,{onCompleted:function onCompleted(data){setMessage(data.login.message);refetchUser();}}),_useMutation2=_slicedToArray(_useMutation,1),login=_useMutation2[0];var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),message=_useState2[0],setMessage=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),forgot=_useState4[0],setForgot=_useState4[1];return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-origin-padding w-min rounded-lg bg-gray-300 bg-opacity-90 shadow-2xl mt-10 ml-10 p-4\",children:[forgot?/*#__PURE__*/_jsx(Redirect,{to:\"/auth/forgot\"}):undefined,/*#__PURE__*/_jsx(Formik,{initialValues:{email:\"\",password:\"\"},validationSchema:Yup.object({email:Yup.string().email(\"Invalid email address\").required(\"Required\"),password:Yup.string().required(\"Required\")}),onSubmit:function onSubmit(values,_ref2){var setSubmitting=_ref2.setSubmitting;setTimeout(function(){login({variables:{email:values.email,password:values.password}});setSubmitting(false);},400);},className:\"flex items-center justify-center\",children:/*#__PURE__*/_jsxs(Form,{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",className:\"font-bold\",children:\"Email\"}),/*#__PURE__*/_jsx(Field,{name:\"email\",type:\"email\",className:\"rounded-lg \"}),/*#__PURE__*/_jsx(ErrorMessage,{name:\"email\",component:\"div\",className:\"text-red-600 text-sm\"}),/*#__PURE__*/_jsx(\"div\",{className:\"h-4\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",className:\"font-bold\",children:\"Password\"}),/*#__PURE__*/_jsx(Field,{name:\"password\",type:\"password\",className:\"rounded-lg \"}),/*#__PURE__*/_jsx(ErrorMessage,{name:\"password\",component:\"div\",className:\"text-red-600 text-sm\"}),/*#__PURE__*/_jsx(\"div\",{className:\"h-4\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"bg-blue-600 rounded-full w-full text-white\",children:\"Login\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"text-red-600 text-sm mt-2\",children:message}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return setForgot(true);},className:\"bg-blue-600 rounded-full w-full text-white mt-5\",children:\"Forgot Password\"})]});};export default LoginView;","map":{"version":3,"sources":["/home/gaby/Projects/promptly/client/src/views/LoginView.js"],"names":["useMutation","gql","Formik","Form","Field","ErrorMessage","Yup","useState","Redirect","LOGIN","LoginView","refetchUser","onCompleted","data","setMessage","login","message","forgot","setForgot","undefined","email","password","object","string","required","values","setSubmitting","setTimeout","variables"],"mappings":"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","sourcesContent":["import { useMutation, gql } from \"@apollo/client\";\nimport { Formik, Form, Field, ErrorMessage } from \"formik\";\nimport * as Yup from \"yup\";\nimport { useState } from \"react\";\nimport { Redirect } from \"react-router-dom\";\n\nconst LOGIN = gql`\n  mutation Login($email: String!, $password: String!) {\n    login(email: $email, password: $password) {\n      message\n    }\n  }\n`;\n\nconst LoginView = ({refetchUser}) => {\n  const [login] = useMutation(LOGIN, {\n    onCompleted: (data) => {\n      setMessage(data.login.message);\n      refetchUser()\n    },\n  });\n  const [message, setMessage] = useState(\"\");\n  \n  const [forgot, setForgot] = useState(false)\n\n  return (\n    <div className=\"bg-origin-padding w-min rounded-lg bg-gray-300 bg-opacity-90 shadow-2xl mt-10 ml-10 p-4\">\n      {forgot ? <Redirect to=\"/auth/forgot\"/> : undefined}\n      <Formik\n        initialValues={{ email: \"\", password: \"\" }}\n        validationSchema={Yup.object({\n          email: Yup.string()\n            .email(\"Invalid email address\")\n            .required(\"Required\"),\n          password: Yup.string().required(\"Required\"),\n        })}\n        onSubmit={(values, { setSubmitting }) => {\n          setTimeout(() => {\n            login({\n              variables: { email: values.email, password: values.password },\n            });\n            setSubmitting(false);\n          }, 400);\n        }}\n        className=\"flex items-center justify-center\"\n      >\n        <Form>\n          <label htmlFor=\"email\" className=\"font-bold\">\n            Email\n          </label>\n          <Field name=\"email\" type=\"email\" className=\"rounded-lg \" />\n          <ErrorMessage\n            name=\"email\"\n            component=\"div\"\n            className=\"text-red-600 text-sm\"\n          />\n          <div className=\"h-4\" />\n          <label htmlFor=\"password\" className=\"font-bold\">\n            Password\n          </label>\n          <Field name=\"password\" type=\"password\" className=\"rounded-lg \" />\n          <ErrorMessage\n            name=\"password\"\n            component=\"div\"\n            className=\"text-red-600 text-sm\"\n          />\n          <div className=\"h-4\" />\n          <button\n            type=\"submit\"\n            className=\"bg-blue-600 rounded-full w-full text-white\"\n          >\n            Login\n          </button>\n        </Form>\n      </Formik>\n      <div className=\"text-red-600 text-sm mt-2\">{message}</div>\n      <button onClick={() => setForgot(true)} className=\"bg-blue-600 rounded-full w-full text-white mt-5\">Forgot Password</button>\n    </div>\n  );\n};\n\nexport default LoginView;\n"]},"metadata":{},"sourceType":"module"}